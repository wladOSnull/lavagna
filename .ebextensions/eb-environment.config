option_settings:

# networking and security
  aws:ec2:vpc:
    VPCId: vpc-0646f799d5e6fedeb
    AssociatePublicIpAddress: false
    ELBScheme: public
    ELBSubnets: subnet-00885713deb420741, subnet-0f3266dfe86135701    
    Subnets: subnet-0f8f08ec168539987, subnet-063478e73c557e779
    DBSubnets: subnet-0f8f08ec168539987, subnet-063478e73c557e779

  aws:autoscaling:launchconfiguration:
    SSHSourceRestriction: tcp, 22, 22, sg-0fc6a2aae310aab2d
    SecurityGroups: sg-09300dfd7fb051cee
    EC2KeyName: lavagna_keys

# behaviour of the environment
  aws:autoscaling:updatepolicy:rollingupdate:
    RollingUpdateType: Immutable

  aws:elasticbeanstalk:command:
    DeploymentPolicy:  Immutable

  aws:autoscaling:asg:
    MinSize: 1
    MaxSize: 1

# health
  aws:elasticbeanstalk:application:
    Application Healthcheck URL: /login?reqUrl=%2F

  aws:elasticbeanstalk:environment:process:default:
    HealthCheckPath: /login?reqUrl=%2F

# logs
  aws:elasticbeanstalk:cloudwatch:logs:
    StreamLogs: true
    DeleteOnTerminate: true

  aws:elasticbeanstalk:cloudwatch:logs:health:
    HealthStreamingEnabled: true
    DeleteOnTerminate: true

container_commands:

# substitute autogenerated .env file to custom (look in other .config file)
  00_su_env_file:
    command: "cp /tmp/.env /var/app/staging/.env"
